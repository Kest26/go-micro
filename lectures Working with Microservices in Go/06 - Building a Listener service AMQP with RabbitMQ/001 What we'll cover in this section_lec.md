## Введение: Что будет рассмотрено в этом разделе

---

### Основные способы взаимодействия микросервисов

На данный момент все наши микросервисы взаимодействуют друг с другом двумя основными способами. Первый способ заключается в том, что брокер получает запрос, отправляет его соответствующему микросервису, получает ответ и затем возвращает его пользователю. Второй способ – это прямое взаимодействие пользователя с микросервисом, например, с аутентификационным сервисом, если нам это нужно.

На данный момент мы используем JSON-запросы для обмена данными между сервисами, и это вполне рабочий и эффективный подход. Однако, в этом разделе курса мы немного усложним нашу архитектуру, добавив дополнительную функциональность.

---

### Введение в новый подход: сервис-слушатель и RabbitMQ

То, что мы собираемся реализовать, — это сервис-слушатель. Этот сервис будет взаимодействовать с RabbitMQ — сервером, который управляет очередями сообщений, как можно предположить из названия.

Примером работы этой системы может быть следующая ситуация: пользователь отправляет запрос брокеру с требованием провести аутентификацию. Вместо того, чтобы брокер напрямую взаимодействовал с аутентификационным сервисом, он просто отправляет инструкции в RabbitMQ, используя протокол AMQP (Advanced Messaging Queue Protocol). RabbitMQ принимает этот запрос и добавляет его в очередь.

Сервис-слушатель затем проверяет очередь, спрашивая, есть ли там какие-то инструкции. Когда он находит инструкцию, он извлекает её и решает, что с ней делать, основываясь на её содержимом.

---

### Пример работы: Сценарий с аутентификацией

Возьмем конкретный пример, когда пользователь пытается войти в систему. Пользователь делает запрос брокеру, брокер добавляет этот запрос в очередь и забывает о нём. Затем слушатель извлекает этот запрос из очереди и определяет, какие действия нужно предпринять. Нужно ли отправить письмо, провести аутентификацию или зафиксировать какое-то событие?

В нашем случае слушатель отправляет запрос на сервер аутентификации, который затем пытается авторизовать пользователя и предпринимает соответствующие действия в зависимости от результата этой попытки.

Хотя это может звучать сложно, на самом деле всё довольно просто. В этом разделе мы начнем с создания микросервиса-слушателя и реализуем хотя бы один сценарий, в котором запрос добавляется в очередь, а слушатель его извлекает и обрабатывает соответствующим образом. После того как вы реализуете это для одного микросервиса, вы сможете использовать аналогичную логику для других микросервисов.

---

### Заключение: Готовимся к реализации

Давайте начнем нашу работу по созданию слушателя и интеграции его с очередью сообщений.
